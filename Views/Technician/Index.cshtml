@model POS.Models.Technician.TechnicianVM

@{
    ViewBag.Title = "Technician";
    Layout = "~/Views/Shared/_LayoutTechnician.cshtml";
}


<div class="page-header navbar navbar-fixed-top">
    <div class="page-header-inner ">
        <div class="page-logo" style=" font-size: 25px; font-weight: bold; padding-top: 25px;">
            TechCity
        </div>
        <div class="location-name">
            <b>@Model.LocationName</b>
        </div>

        <div class="page-actions" style="float:right;">
            <div style="float:left;margin:5px;">
                <div class="btn-group btn-menu-lg">
                    <a class="btn btn-circle purple" href="javascript:;" data-toggle="dropdown" onclick="keyPressBeep()">
                        <i class="fa fa-gear"></i> Settings
                        <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="javascript:;" onclick="HomeScreen()">
                                <i class="fa fa-check"></i> @POS.Resources.Resource.Home
                            </a>
                        </li>
                        <li>
                            <a href="javascript:;" onclick="UpdatePartsScreen()">
                                <i class="fa fa-check"></i> @POS.Resources.Resource.Inventory
                            </a>
                        </li>
                        <li>
                            <a href="javascript:;" onclick="UpdateStockScreen()">
                                <i class="fa fa-check"></i> @POS.Resources.Resource.UpdateStock
                            </a>
                        </li>
                        <li>
                            <a href="javascript:;" onclick="UpdateStockHistoryScreen()">
                                <i class="fa fa-history"></i> @POS.Resources.Resource.UpdateStockHistory
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div style="float:left;margin:5px;">
                <a href="@Url.Action("LogOff", "Login")"
                   class="btn btn-circle red btn-menu-lg"
                   onclick="keyPressBeep()"><i class="fa fa-sign-out"></i>@POS.Resources.Resource.LogOut</a>
            </div>
        </div>

    </div>
</div>
<div id="update_screen" class="not_main_screen content-screen">
</div>
<div id="updatestock_screen" class="not_main_screen content-screen">
</div>
<div id="updatestockhistory_screen" class="not_main_screen content-screen">
</div>
<div id="parts_screen" class="not_main_screen content-screen">
</div>
<div id="add_new_part_screen" class="not_main_screen content-screen">
</div>
<div id="update_part_screen" class="not_main_screen content-screen">
</div>
<div class="content-screen" id="main_screen">

    <div class="portlet light">
        <div class="portlet-title">
            <div class="caption">
                <i class="icon-bar-chart font-green"></i>
                <span class="caption-subject font-green bold uppercase">Repair Orders</span>
            </div>
            <div class="actions">
            </div>
        </div>
        <div class="portlet-body">
            <div>
                <div class="tab-div sr-tab-div">
                    <table class="display" style="width:100%" id="orderTable">
                        <thead>
                            <tr>
                                <th>
                                    Order #
                                </th>
                                <th>Date</th>
                                <th>Customer Name</th>
                                <th>Customer Phone</th>
                                <th>Customer Email</th>
                                <th>Accessories Left at Store</th>
                                <th>Problem or Service</th>
                                <th>@POS.Resources.Resource.Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.RepairOrders)
                            {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.RefNo)
                                    </td>
                                    <td>
                                        @item.Date.ToShortDateString()
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.CustomerName)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.CustomerPhone)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.CustomerEmail)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.AccessoriesLeft)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.ProblemDescription)
                                    </td>
                                    <td>
                                        @if (item.Status == Common.SharedTypes.RepairOrderStatus.CustomerAgreed)
                                        {
                                            <button onclick="UpdateScreen('@item.Id')"
                                                    class="btn btn-lg blue">
                                                Update
                                            </button>
                                            @*<button onclick="printTag('@Json.Encode(item)')"
                                                    class="btn btn-lg blue">
                                                Print Tag
                                            </button>*@
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</div>


<script type="text/javascript" charset="utf-8">

    notificationHub.client.reloadRepairOrders = function (roId) {
        window.location.href = "/technician";
    };

</script>




