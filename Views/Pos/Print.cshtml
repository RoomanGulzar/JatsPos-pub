@model POS.Models.CustomerRepair.RepairOrderVM

<div class="row">
    <div class="col-sm-12">

        <div class="portlet light">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-bar-chart font-green"></i>
                    <span class="caption-subject font-green bold uppercase">Repair Order</span>
                    <span class="caption-helper">order number @Model.RepairOrder.RefNo</span>
                </div>
                <div class="actions">
                    <button onclick="printRepairOrder()" class="btn btn-lg dark btn-home-back">
                        Print
                        </button>
                    <button onclick="RepairOrdersScreen()" 
                            class="btn btn-lg dark btn-home-back">@POS.Resources.Resource.Back</button>
                </div>
            </div>
            <div class="portlet-body" id="print-section" style="margin-left:100px;margin-right:100px">
                <div style="display:flex;justify-content:space-between;padding:10px">
                   <h2>TechSource Canada</h2>
                    <h2>Diagnosticts and Repair Invoice</h2>
                </div>
                <div style="display:flex;justify-content:space-between;padding:10px">
                    <h2>1014 GERRARD Street E, M4M 1Z3 Toronto, ON Ph.416 406 1222</h2>
                    <h2>Date: @Model.RepairOrder.Date.ToShortDateString()</h2>
                </div>
                <div style="display:flex;justify-content:flex-start;padding:10px">
                    <div style="width:50%">Client Name: @Model.RepairOrder.CustomerName</div>
                    <div>Model: @Model.RepairOrder.Model</div>
                </div>
                <div style="display:flex;justify-content:flex-start;padding:10px">
                    <div style="width:50%">Phone Number: @Model.RepairOrder.CustomerPhone</div>
                    <div>Repair ID: @Model.RepairOrder.RefNo</div>
                </div>
                <div style="display:flex;justify-content:flex-start;padding:10px">
                    <div style="width:50%">Email: @Model.RepairOrder.CustomerEmail</div>
                    <div>Password: @Model.RepairOrder.Password</div>
                </div>
                <div style="display:flex;justify-content:flex-start;padding:10px">
                    <div>Accessories left behind in store:</div>
                    <div>@Model.RepairOrder.AccessoriesLeft</div>
                </div>
                <div style="display:flex;justify-content:center;padding:10px">
                    <div>Description of Problem or Service</div>
                </div>
                <div style="display:flex;justify-content:flex-start;padding:10px">
                    <div>@Model.RepairOrder.ProblemDescription</div>
                </div>
                <div style="display:flex;justify-content:flex-start;padding:10px">
                    <div>Terms and Conditions:</div>
                </div>
                <div style="display:flex;">
                    <ul>
                        <li>$30 deposit is to be paid, this service charge applies for diagnosing on Laptops and Computers only for the first 30min </li>
                        <li>Techsource will not be responsible for any data loss during the repair or service (but will take all measure to prevent this from happening)</li>
                        <li>Techsource will not be responsible for products left over 90 days (after 90 days product will be sold Techsource will make attempts to contact client before this is done)</li>
                        <li>All parts and additional service/repairs charges must be paid for in full upon collection</li>
                        <li>By signing this form the customer agrees to all of the above terms and conditions</li>
                    </ul>
                </div>
                <div style="display:flex;justify-content:flex-start;padding:10px">
                    <div>Customer Signature</div>
                </div>
                <div class="row">
                    <div class="sigPad">
                        <ul class="sigNav">
                            <li style="display:none" class="typeIt"><a href="#type-it">Type It</a></li>
                            <li style="display:none" class="drawIt"><a href="#draw-it" class="current">Sign Now</a></li>
                            @*<li class="clearButton"><a href="#clear">Clear</a></li>*@
                        </ul>
                        <div class="sig sigWrapper">
                            <div style="display:none" class="typed"></div>
                            <canvas style="display:none" id="signatureCanvas" class="pad" width="250" height="65"></canvas>
                            <input type="hidden" id="repairOrderCustomerSignature" value="@Model.RepairOrder.CustomerSignatures">
                            <img id="signatureImage" width="250" height="65" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>
<script type="text/javascript" charset="utf-8">

    function printRepairOrder() {
        var docprint = window.open("about:blank", "_blank");
        docprint.document.open();
        docprint.document.write('<html><head><title>Repair Order @Model.RepairOrder.Date.ToShortDateString()</title>');
        docprint.document.write('' +
    '<style type="text/css">' +
     'table {width:100%;font-size:8px; }' +
    'table th, table td {' +
    'border:1px solid #000;' +
    'padding;0.5em;' +
    '}' +
    '</style>');
        docprint.document.write('</head><body>');
        docprint.document.write("<div style='width:100%';font-size:8px;>");
        docprint.document.write($("#print-section").html());
        docprint.document.write("</div>");
        docprint.document.write('</body></html>');
        docprint.document.close();
        docprint.print();
        docprint.close();
    }

    $(document).ready(function () {
        var signatureValue = $('#repairOrderCustomerSignature').val();
        if (signatureValue) {

            var sig = JSON.parse(signatureValue);
            $('.sigPad').signaturePad({ displayOnly: true }).regenerate(sig);

            var canvas = document.getElementById('signatureCanvas');
            var img = canvas.toDataURL('image/png');

            document.getElementById('signatureImage').src = img;
        }

    });
</script>
