<!DOCTYPE html>

<html>
<head>
    <title>TechCity | @ViewBag.Title</title>
    <meta charset="utf-32">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href="~/Content/Styles/timeline.css" rel="stylesheet" />
    <link href="~/Content/Styles/sb-admin-2.css" rel="stylesheet" />
    <link href="~/Content/Styles/morris.css" rel="stylesheet" />
    <link href="~/Content/Styles/metisMenu.min.css" rel="stylesheet" />
    <link href="~/Content/Styles/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Content/Styles/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="~/Content/Styles/jquery.dataTables_themeroller.css" rel="stylesheet" />
    <link href="~/Content/style.css" rel="stylesheet" />
    <link href="~/Content/themes/base/all.css" rel="stylesheet" />
    <link href="~/Content/jquery.toastmessage.css" rel="stylesheet" />
    <link href="~/Content/Styles/dataTables.responsive.css" rel="stylesheet" />
    <link href="~/Content/Styles/responcive-sidemenc.css" rel="stylesheet" />
    <link href="~/Content/selectize.bootstrap3.css" rel="stylesheet" />
    <link href="~/Content/selectize.css" rel="stylesheet" />
    <link href="~/Content/selectize.default.css" rel="stylesheet" />
    <link href="~/Content/Styles/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/plugins/tag-it/jquery.tagit.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/plugins/tag-it/tagit.ui-zendesk.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/Styles/mystyle.css" rel="stylesheet" />
    <link href="~/Content/Styles/bootstrap-lightbox.min.css" rel="stylesheet" />
    <link href="~/Content/languages.css" rel="stylesheet" />
    <link href="~/Scripts/Kendo/kendo.bootstrap.min.css" rel="stylesheet" />
    <link href="~/Scripts/Kendo/kendo.common.min.css" rel="stylesheet" />

    <style>
        .datepicker {
            width: 100%;
        }
        /* Generic form row */
        .input-row {
            display: flex;
            flex-direction: column;
            margin-bottom: 18px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Label styling */
        .input-label {
            font-weight: 600;
            font-size: 14px;
            color: #333;
            margin-bottom: 6px;
            transition: color 0.2s;
        }

        /* Generic input container */
        .input-wrapper {
            position: relative;
        }

            /* Inputs, select, textarea common style */
            .input-wrapper input,
            .input-wrapper select,
            .input-wrapper textarea {
                width: 100%;
                padding: 10px 12px;
                border: 1px solid #ccc;
                border-radius: 6px;
                font-size: 14px;
                color: #333;
                background-color: #fff;
                appearance: none; /* remove native dropdown arrow for select */
                -webkit-appearance: none;
                -moz-appearance: none;
                transition: all 0.2s ease-in-out;
            }

                /* Hover effect */
                .input-wrapper input:hover,
                .input-wrapper select:hover,
                .input-wrapper textarea:hover {
                    border-color: #888;
                }

                /* Focus effect */
                .input-wrapper input:focus,
                .input-wrapper select:focus,
                .input-wrapper textarea:focus {
                    outline: none;
                    border-color: #007BFF;
                    box-shadow: 0 0 6px rgba(0, 123, 255, 0.3);
                }

            /* Custom arrow for select */
            .input-wrapper select {
                cursor: pointer;
                padding-right: 30px;
            }

            .input-wrapper.select-wrapper::after {
                content: '▼';
                position: absolute;
                right: 12px;
                top: 50%;
                transform: translateY(-50%);
                pointer-events: none;
                font-size: 10px;
                color: #666;
            }

            /* Textarea resizing */
            .input-wrapper textarea {
                resize: vertical;
                min-height: 80px;
            }
        /* Container for checkbox row */
        .checkbox-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Label for checkbox */
        .checkbox-label {
            font-weight: 600;
            font-size: 14px;
            color: #333;
            margin-right: 8px;
            cursor: pointer;
        }

        /* Checkbox wrapper */
        .checkbox-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

            /* Hide default checkbox */
            .checkbox-wrapper input[type="checkbox"] {
                appearance: none;
                -webkit-appearance: none;
                -moz-appearance: none;
                width: 18px;
                height: 18px;
                border: 2px solid #ccc;
                border-radius: 4px;
                background-color: #fff;
                cursor: pointer;
                position: relative;
                transition: all 0.2s ease-in-out;
            }

                /* Hover effect */
                .checkbox-wrapper input[type="checkbox"]:hover {
                    border-color: #888;
                }

                /* Checked state */
                .checkbox-wrapper input[type="checkbox"]:checked {
                    background-color: #007BFF;
                    border-color: #007BFF;
                }

                    /* Custom checkmark */
                    .checkbox-wrapper input[type="checkbox"]:checked::after {
                        content: '';
                        position: absolute;
                        left: 4px;
                        top: 0px;
                        width: 6px;
                        height: 12px;
                        border: solid #fff;
                        border-width: 0 2px 2px 0;
                        transform: rotate(45deg);
                    }
    </style>
</head>
<body>

    <nav class="navbar navbar-default navbar-fixed-top " role="navigation">
        <div class="navbar-header">
            <div class="brand-wrapper">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-menu-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/Home">
                    <span style="float:left;"> TechCity </span><span class="com-name"></span><span class="com-name" id="location-name"></span>
                </a>
                <div id="search" class="panel-collapse collapse">
                    <div class="panel-body">

                        @*<form class="navbar-form" role="search">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Search">
                                </div>
                                <button type="submit" class="btn btn-default "><span class="glyphicon glyphicon-ok"></span></button>
                            </form>*@
                    </div>
                </div>
            </div>

        </div>
        @Html.Action("Menu", "Home")
    </nav>

    <div class="row">
        <div class="jumbotron">
            <div id="main-content" class="side-body">
                <!-- /.row -->
                @RenderBody()
            </div>
        </div>
    </div>

    <div class="overlay">
    </div>
    <div style="display: none">
        <div id="session-alert" class="panel panel-warning">
            <div>
                @POS.Resources.Resource.Yoursessionhasexpiredpleaserelogin
            </div>
        </div>
    </div>
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/Kendo/kendo.all.min.js"></script>
    <script src="~/Scripts/jquery.dataTables.min.js"></script>
    <script src="~/Scripts/selectize.js"></script>
    <script src="~/Scripts/jquery-ui-1.11.3.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/metisMenu.min.js"></script>
    <script src="~/Scripts/raphael-min.js"></script>
    <script src="~/Scripts/morris.min.js"></script>
    <script src="~/Scripts/sb-admin-2.js"></script>
    <script src="~/Scripts/modernizr-2.5.3.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/forms.min.js"></script>
    <script src="~/Scripts/jquery.toastmessage.js"></script>
    <script src="~/Content/plugins/tag-it/tag-it.min.js"></script>
    <script src="~/Content/plugins/FileSaver.js"></script>
    @*<script src="//oss.maxcdn.com/jquery.form/3.50/jquery.form.min.js"></script>*@
    <script src="~/Scripts/POS/main.js"></script>
    <script src="~/Scripts/dataTables.responsive.js"></script>
    <script src="~/Scripts/Chart.min.js"></script>
    <script src="~/Scripts/bootstrap-lightbox.min.js"></script>
    <script src="~/Scripts/Convertion/persianumber.js"></script>


    <script>
        // avoids auto submit form
        // did for barcode scan
        $(document).ready(function () {
            $(window).keydown(function (event) {
                if (event.keyCode === 13
                    && !$(event.target).closest("item-form-u")
                    && !$(event.target).hasClass("sale-items")
                    && !(event.target.nodeName == "TEXTAREA")) {
                    debugger
                    event.preventDefault();
                    return false;
                }
            });
        });

        blockUI();
        $.ajax({
            type: "GET",
            contentType: "html",
            url: '/Home/DashboardCounts',
            async: true,
            success: function (data) {
                unblockUI();
                if (data) {

                    $("#pendingTransfer").html(data.Counts.PendingTransfers);
                    $("#amountReceiveable").html(data.Counts.ReceivableAmount);
                    $("#amountPayable").html(data.Counts.PayableAmount);
                    $("#pendingPO").html(data.Counts.PendingPO);
                    $("#cashReceived").html(data.Counts.CashReceived);
                    var lab = [];
                    var dat = [];
                    var saleChartData;
                    var purchaseChartData;
                    var locationChartData;
                    var mostSaleChartData;
                    for (var i = 0; i < data.Sales.length; i++) {
                        lab.push(data.Sales[i].Name);
                        dat.push(data.Sales[i].Value);
                    }
                    saleChartData = {
                        labels: lab,
                        datasets: [
                            {
                                //"92,184,92" Green
                                //    "24,173,78" Yellow
                                //    "51,122,183" Blue
                                //    "217,83,79" Red
                                fillColor: "rgba(51,122,183,0.5)",
                                strokeColor: "rgba(51,122,183,0.8)",
                                highlightFill: "rgba(51,122,183,0.75)",
                                highlightStroke: "rgba(51,122,183,1)",
                                data: dat
                            }
                        ]

                    }
                    lab = [];
                    dat = [];
                    for (var i = 0; i < data.Purchase.length; i++) {
                        lab.push(data.Purchase[i].Name);
                        dat.push(data.Purchase[i].Value);
                    }
                    purchaseChartData = {
                        labels: lab,
                        datasets: [
                            {
                                fillColor: "rgba(92,184,92,0.5)",
                                strokeColor: "rgba(92,184,92,0.8)",
                                highlightFill: "rgba(92,184,92,0.75)",
                                highlightStroke: "rgba(92,184,92,1)",
                                data: dat
                            }
                        ]

                    }
                    lab = [];
                    dat = [];
                    for (var i = 0; i < data.Locations.length; i++) {
                        lab.push(data.Locations[i].Name);
                        dat.push(data.Locations[i].Value);
                    }
                    locationChartData = {
                        labels: lab,
                        datasets: [
                            {
                                fillColor: "rgba(24,173,78,0.5)",
                                strokeColor: "rgba(24,173,78,0.8)",
                                highlightFill: "rgba(24,173,78,0.75)",
                                highlightStroke: "rgba(24,173,78,1)",
                                data: dat
                            }
                        ]

                    }
                    lab = [];
                    dat = [];
                    for (var i = 0; i < data.SoldItem.length; i++) {
                        lab.push(data.SoldItem[i].Name);
                        dat.push(data.SoldItem[i].Value);
                    }
                    mostSaleChartData = {
                        labels: lab,
                        datasets: [
                            {
                                fillColor: "rgba(217,83,79,0.5)",
                                strokeColor: "rgba(217,83,79,0.8)",
                                highlightFill: "rgba(217,83,79,0.75)",
                                highlightStroke: "rgba(217,83,79,1)",
                                data: dat
                            }
                        ]

                    }
                    var ctx = document.getElementById("saleGraph").getContext("2d");
                    window.myBar = new Chart(ctx).Line(saleChartData, {
                        responsive: true
                    });
                    var ctx = document.getElementById("purchaseGraph").getContext("2d");
                    window.myBar = new Chart(ctx).Bar(purchaseChartData, {
                        responsive: true
                    });
                    var ctx = document.getElementById("locationGraph").getContext("2d");
                    window.myBar = new Chart(ctx).Bar(locationChartData, {
                        responsive: true
                    });
                    var ctx = document.getElementById("msiGraph").getContext("2d");
                    window.myBar = new Chart(ctx).Bar(mostSaleChartData, {
                        responsive: true
                    });
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                handleErrors(textStatus);
            }
        });


    </script>
</body>

</html>

<script>
    $("#location-name").html($("#Location_SiteName").val());

</script>

