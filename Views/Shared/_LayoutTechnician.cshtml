@using DataAccessLayer.Helpers

<!DOCTYPE html>

<html>
<head>
    <title>TechCity | @ViewBag.Title</title>
    <meta charset="utf-32">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href="~/Content/Styles/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Content/Styles/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="~/Content/Styles/jquery.dataTables_themeroller.css" rel="stylesheet" />
    <link href="~/Content/Styles/dataTables.responsive.css" rel="stylesheet" />
    <link href="~/Content/style.css" rel="stylesheet" />
    <link href="~/Content/themes/base/all.css" rel="stylesheet" />
    <link href="~/Content/Styles/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/jquery.toastmessage.css" rel="stylesheet" />
    <link href="~/Content/themes/pos/bootstrap-tabdrop/tabdrop.css" rel="stylesheet" />
    <link href="~/Content/selectize.bootstrap3.css" rel="stylesheet" />
    <link href="~/Content/selectize.css" rel="stylesheet" />
    <link href="~/Content/selectize.default.css" rel="stylesheet" />
    <link href="~/Content/themes/pos/components-rounded.min.css" rel="stylesheet" />
    <link href="~/Content/themes/pos/plugins.min.css" rel="stylesheet" />
    <link href="~/Content/themes/pos/layout.min.css" rel="stylesheet" />
    <link href="~/Content/themes/pos/light.min.css" rel="stylesheet" />
    <link href="~/Scripts/Kendo/kendo.bootstrap.min.css" rel="stylesheet" />
    <link href="~/Scripts/Kendo/kendo.common.min.css" rel="stylesheet" />
    <link href="~/Content/languages.css" rel="stylesheet" />
    <link href="~/Content/Styles/mystyle.css" rel="stylesheet" />

    <style>
        /*body {
            background-color:darkslateblue !important;
        }

        .form-control {
            background-color: dodgerblue;
            color: white;
        }*/

        .datepicker {
            width: 100%;
        }

        .ui-autocomplete {
            min-height: 200px;
        }
    </style>
</head>
<body class="page-container-bg-solid page-header-fixed page-sidebar-closed-hide-logo">

    <audio src="~/Content/keypress.wav" style="display:none;" autostart="false" width="0" height="0" id="keypresssound"
           enablejavascript="true"></audio>

    <audio src="~/Content/beep.wav" autostart="false" style="display:none;" width="0" height="0" id="beep"
           enablejavascript="true"></audio>
    @RenderBody()
    <div class="overlay">
    </div>
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/jquery.dataTables.min.js"></script>
    <script src="~/Scripts/Kendo/kendo.all.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.11.3.min.js"></script>
    <script src="~/Scripts/modernizr-2.5.3.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/forms.min.js"></script>
    <script src="~/Scripts/jquery.toastmessage.js"></script>
    <script src="~/Scripts/buttons.js"></script>

    @*<script src="~/Scripts/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js"></script>*@
    <script src="~/Scripts/plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script src="~/Scripts/plugins/qrious.min.js"></script>

    <script src="~/Scripts/POS/pos/bootstrap-tabdrop/bootstrap-tabdrop.js" type="text/javascript"></script>
    <script src="~/Scripts/dataTables.responsive.js"></script>
    <script src="~/Scripts/selectize.js"></script>
    <script src="~/Scripts/POS/pos/app.js"></script>
    <script src="~/Scripts/POS/pos/layout.js"></script>
    <script src="~/Scripts/POS/technician.js"></script>

    <script type="text/javascript">
        var notificationHub = null;
        // notification hub
        (function () {
            // Defining a connection to the server hub.
            notificationHub = $.connection.notifyHub;
            // Setting logging to true so that we can see whats happening in the browser console log. [OPTIONAL]
            $.connection.hub.logging = true;
            // Start the hub
            $.connection.hub.start();

            // Client method to broadcast the message

        }());

        setInterval(function () { refreshSession() }, 6000);
        //NotificationTicker();
        var pressed = false;
        var chars = [];
        $(document).unbind("keypress");
        $(document).keypress(function (e) {


            if (e.shiftKey && e.keyCode === 33) {
                $("#searchItemQuery").focus();
                e.preventDefault();
                return false;
            }
            if (e.shiftKey && e.keyCode === 64) {
                addPayment('@Constants.CashSale');
                e.preventDefault();
                return false;
            }

            if (e.shiftKey && e.keyCode === 35) {
                addPayment('@Constants.CreditCardSale');
                e.preventDefault();
                return false;
            }

            if (e.which >= 48 && e.which <= 57) {
                chars.push(String.fromCharCode(e.which));
            }
            console.log(e.which + ":" + chars.join("|"));


            if (pressed === false) {

                setTimeout(function () {

                    if (chars.length >= 8) {
                        var $focused = $(':focus');
                        if (!$focused.is(':button')) {
                            $focused.val("");
                        }

                        var barcode = chars.join("");

                        // assign value to some input (or do whatever you want)
                        addToCart(barcode);

                        barcode = "";
                    }
                    chars = [];
                    pressed = false;
                }, 500);
            }
            pressed = true;
        });

        $(document).unbind("keydown");
        $(document).keydown(function (e) {

            if (e.keyCode === 27) {
                $("#searchItemQuery").val("");
                $("#searchItemQuery").focus();
                e.preventDefault();
                return false;
            }
        });

        $(":input").keypress(function (event) {
            if (event.which == '10' || event.which == '13') {
                event.preventDefault();
            }
        });

    </script>


</body>

</html>
